<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ARTS-week-61 | Oceantime&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Oceantime 个人网站">
    <link rel="preload" href="/assets/css/0.styles.abfd12c2.css" as="style"><link rel="preload" href="/assets/js/app.65b0f24a.js" as="script"><link rel="preload" href="/assets/js/2.d6ca9a42.js" as="script"><link rel="preload" href="/assets/js/74.00cd90be.js" as="script"><link rel="prefetch" href="/assets/js/10.ad6941e4.js"><link rel="prefetch" href="/assets/js/100.8ade9f63.js"><link rel="prefetch" href="/assets/js/101.a15dfa49.js"><link rel="prefetch" href="/assets/js/102.761bd3ff.js"><link rel="prefetch" href="/assets/js/103.4e1cd420.js"><link rel="prefetch" href="/assets/js/104.6cfd7216.js"><link rel="prefetch" href="/assets/js/105.e2d93a01.js"><link rel="prefetch" href="/assets/js/106.6151bc8f.js"><link rel="prefetch" href="/assets/js/107.ad872ea3.js"><link rel="prefetch" href="/assets/js/108.bc756e31.js"><link rel="prefetch" href="/assets/js/109.fe77c5ed.js"><link rel="prefetch" href="/assets/js/11.f05321e1.js"><link rel="prefetch" href="/assets/js/110.39bd8ea8.js"><link rel="prefetch" href="/assets/js/111.bd5d0a8b.js"><link rel="prefetch" href="/assets/js/112.66f93d20.js"><link rel="prefetch" href="/assets/js/113.e3f1b94f.js"><link rel="prefetch" href="/assets/js/114.6ca21a56.js"><link rel="prefetch" href="/assets/js/115.2369b994.js"><link rel="prefetch" href="/assets/js/116.ef676fd0.js"><link rel="prefetch" href="/assets/js/117.7762c22c.js"><link rel="prefetch" href="/assets/js/118.dc732d76.js"><link rel="prefetch" href="/assets/js/119.2b7f1a4d.js"><link rel="prefetch" href="/assets/js/12.b607cc9e.js"><link rel="prefetch" href="/assets/js/120.1b132ede.js"><link rel="prefetch" href="/assets/js/121.ff9a3172.js"><link rel="prefetch" href="/assets/js/122.2f47d49f.js"><link rel="prefetch" href="/assets/js/13.67af4ad6.js"><link rel="prefetch" href="/assets/js/14.c7827c0f.js"><link rel="prefetch" href="/assets/js/15.eedb1566.js"><link rel="prefetch" href="/assets/js/16.fe37cbf7.js"><link rel="prefetch" href="/assets/js/17.a38f0ae2.js"><link rel="prefetch" href="/assets/js/18.4990ee61.js"><link rel="prefetch" href="/assets/js/19.f4dbb6de.js"><link rel="prefetch" href="/assets/js/20.9ffd67c9.js"><link rel="prefetch" href="/assets/js/21.ac6e1d53.js"><link rel="prefetch" href="/assets/js/22.76b0e02e.js"><link rel="prefetch" href="/assets/js/23.ff3410dc.js"><link rel="prefetch" href="/assets/js/24.f76a6fea.js"><link rel="prefetch" href="/assets/js/25.0534f43c.js"><link rel="prefetch" href="/assets/js/26.c3725782.js"><link rel="prefetch" href="/assets/js/27.deb9c9f3.js"><link rel="prefetch" href="/assets/js/28.6f99ddc2.js"><link rel="prefetch" href="/assets/js/29.02cfc711.js"><link rel="prefetch" href="/assets/js/3.9f6270c9.js"><link rel="prefetch" href="/assets/js/30.ccabc2c3.js"><link rel="prefetch" href="/assets/js/31.b08f8990.js"><link rel="prefetch" href="/assets/js/32.ee62ba38.js"><link rel="prefetch" href="/assets/js/33.f7629f38.js"><link rel="prefetch" href="/assets/js/34.2853c933.js"><link rel="prefetch" href="/assets/js/35.97e611fd.js"><link rel="prefetch" href="/assets/js/36.fa3c8ed4.js"><link rel="prefetch" href="/assets/js/37.8ae8d904.js"><link rel="prefetch" href="/assets/js/38.05c35d7b.js"><link rel="prefetch" href="/assets/js/39.e5258c9e.js"><link rel="prefetch" href="/assets/js/4.ecc02e05.js"><link rel="prefetch" href="/assets/js/40.d668fe84.js"><link rel="prefetch" href="/assets/js/41.c09eb1d5.js"><link rel="prefetch" href="/assets/js/42.b940c3f3.js"><link rel="prefetch" href="/assets/js/43.5f4e8385.js"><link rel="prefetch" href="/assets/js/44.7231a1e4.js"><link rel="prefetch" href="/assets/js/45.585825f0.js"><link rel="prefetch" href="/assets/js/46.14ddc0e4.js"><link rel="prefetch" href="/assets/js/47.52d53fb0.js"><link rel="prefetch" href="/assets/js/48.01214996.js"><link rel="prefetch" href="/assets/js/49.a8e7ddc6.js"><link rel="prefetch" href="/assets/js/5.755ee6e4.js"><link rel="prefetch" href="/assets/js/50.8ef31d09.js"><link rel="prefetch" href="/assets/js/51.86c845e5.js"><link rel="prefetch" href="/assets/js/52.0d1a6570.js"><link rel="prefetch" href="/assets/js/53.0b2ca6b6.js"><link rel="prefetch" href="/assets/js/54.daa0b522.js"><link rel="prefetch" href="/assets/js/55.b7e6d8cc.js"><link rel="prefetch" href="/assets/js/56.67e22da8.js"><link rel="prefetch" href="/assets/js/57.1b8d87fd.js"><link rel="prefetch" href="/assets/js/58.4ef89df1.js"><link rel="prefetch" href="/assets/js/59.abdf0f5c.js"><link rel="prefetch" href="/assets/js/6.3df7280b.js"><link rel="prefetch" href="/assets/js/60.35f8805b.js"><link rel="prefetch" href="/assets/js/61.68fa7ebd.js"><link rel="prefetch" href="/assets/js/62.fd6b0085.js"><link rel="prefetch" href="/assets/js/63.af0dbde2.js"><link rel="prefetch" href="/assets/js/64.16a1ffec.js"><link rel="prefetch" href="/assets/js/65.af1a9908.js"><link rel="prefetch" href="/assets/js/66.0ab56108.js"><link rel="prefetch" href="/assets/js/67.7b28f376.js"><link rel="prefetch" href="/assets/js/68.be9ab4b2.js"><link rel="prefetch" href="/assets/js/69.c030abbd.js"><link rel="prefetch" href="/assets/js/7.3549904d.js"><link rel="prefetch" href="/assets/js/70.1469061c.js"><link rel="prefetch" href="/assets/js/71.4802b635.js"><link rel="prefetch" href="/assets/js/72.83cb541b.js"><link rel="prefetch" href="/assets/js/73.3ad064c7.js"><link rel="prefetch" href="/assets/js/75.cbf47e0f.js"><link rel="prefetch" href="/assets/js/76.44ccee9d.js"><link rel="prefetch" href="/assets/js/77.e9c38d7e.js"><link rel="prefetch" href="/assets/js/78.9122406c.js"><link rel="prefetch" href="/assets/js/79.5478a7f9.js"><link rel="prefetch" href="/assets/js/8.183e1cde.js"><link rel="prefetch" href="/assets/js/80.81f8b615.js"><link rel="prefetch" href="/assets/js/81.ceada5ea.js"><link rel="prefetch" href="/assets/js/82.6106ff2d.js"><link rel="prefetch" href="/assets/js/83.59665864.js"><link rel="prefetch" href="/assets/js/84.14e761a8.js"><link rel="prefetch" href="/assets/js/85.dd1f6fdb.js"><link rel="prefetch" href="/assets/js/86.c780faa6.js"><link rel="prefetch" href="/assets/js/87.b6a78c96.js"><link rel="prefetch" href="/assets/js/88.e6f83878.js"><link rel="prefetch" href="/assets/js/89.3b38af38.js"><link rel="prefetch" href="/assets/js/9.d9ab8dd1.js"><link rel="prefetch" href="/assets/js/90.64e54699.js"><link rel="prefetch" href="/assets/js/91.b0c97860.js"><link rel="prefetch" href="/assets/js/92.a49f1aa9.js"><link rel="prefetch" href="/assets/js/93.30383993.js"><link rel="prefetch" href="/assets/js/94.e5ff08c3.js"><link rel="prefetch" href="/assets/js/95.6ee9cb6c.js"><link rel="prefetch" href="/assets/js/96.829351f9.js"><link rel="prefetch" href="/assets/js/97.dcf9c2e9.js"><link rel="prefetch" href="/assets/js/98.58af886e.js"><link rel="prefetch" href="/assets/js/99.d137b7f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.abfd12c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Oceantime's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ARTS-week-61</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2020/ARTS-week-61.html#arts-2019-左耳听风社群活动-每周完成一个-arts" class="sidebar-link">ARTS-2019 左耳听风社群活动--每周完成一个 ARTS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2020/ARTS-week-61.html#_1-algorithm" class="sidebar-link">1.Algorithm:</a></li><li class="sidebar-sub-header"><a href="/2020/ARTS-week-61.html#_2-review" class="sidebar-link">2.Review:</a></li><li class="sidebar-sub-header"><a href="/2020/ARTS-week-61.html#_3-tip" class="sidebar-link">3.Tip:</a></li><li class="sidebar-sub-header"><a href="/2020/ARTS-week-61.html#_4-share" class="sidebar-link">4.Share:</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="arts-2019-左耳听风社群活动-每周完成一个-arts"><a href="#arts-2019-左耳听风社群活动-每周完成一个-arts" class="header-anchor">#</a> ARTS-2019 左耳听风社群活动--每周完成一个 ARTS</h2> <p>1.Algorithm： 每周至少做一个 leetcode 的算法题
2.Review: 阅读并点评至少一篇英文技术文章
3.Tip: 学习至少一个技术技巧
4.Share: 分享一篇有观点和思考的技术文章</p> <h3 id="_1-algorithm"><a href="#_1-algorithm" class="header-anchor">#</a> 1.Algorithm:</h3> <ol start="402"><li>移掉K位数字 https://leetcode-cn.com/problems/remove-k-digits/</li></ol> <h3 id="_2-review"><a href="#_2-review" class="header-anchor">#</a> 2.Review:</h3> <p>https://eng.uber.com/aresdb/
aresdb 实时分析引擎</p> <h4 id="点评："><a href="#点评：" class="header-anchor">#</a> 点评：</h4> <p>Jian Shen, Ze Wang, David Wang, Jeremy Shi, and Steven Chen 介绍 AresDB 的设计以及这种强大的实时分析解决方案如何能够更高效，更有效地统一，简化和改进 Uber 的实时分析数据库解决方案。实时分析能够获得业务见解和运营效率，能够做出以数据为依据的决策，以改善用户在 Uber 平台上的体验。</p> <p>AresDB 的体系结构支持以下功能：</p> <ul><li>具有压缩功能的基于列的存储，可提高存储效率（减少存储字节所需的内存使用量）和查询效率（减少查询期间从CPU内存到GPU内存的数据传输）</li> <li>具有主键重复数据删除功能的实时Ups，可在几秒钟内实现 高数据准确性和近实时数据更新
由GPU驱动的查询处理，用于由GPU驱动的高度并行化的数据处理，呈现低查询延迟（亚秒级到秒级）</li></ul> <p>AresDB 在 Uber 广泛用于支持我们的实时数据分析仪表板，使我们能够针对业务的各个方面做出大规模的数据驱动决策。通过开源该工具，我们希望社区中的其他人可以利用AresDB进行自己的分析。将来，我们打算通过以下功能增强该项目：</p> <ul><li>分布式设计：我们正在努力构建 AresDB 的分布式设计，包括复制，分片管理和模式管理，以提高其可伸缩性并降低运营成本。</li> <li>开发人员支持和工具：自2018年11月开源 AresDB 以来，我们一直在致力于构建更直观的工具，重构代码结构以及丰富文档以改善入门体验，从而使开发人员能够快速将 AresDB 集成到其分析堆栈中。</li> <li>扩展功能集： 我们还计划扩展查询功能集，使其包含诸如窗口功能和嵌套循环联接之类的功能，从而使该工具能够支持更多用例。</li> <li>查询引擎优化：我们还将寻求开发更高级的方法来优化查询性能，例如低级虚拟机（LLVM）和GPU内存缓存。</li></ul> <h3 id="_3-tip"><a href="#_3-tip" class="header-anchor">#</a> 3.Tip:</h3> <p>python 之 requests 用法总结</p> <p>官方文档 http://docs.python-requests.org/en/master/
安装 $ pip install requests</p> <p>1.GET 请求</p> <div class="language-python extra-class"><pre class="language-python"><code>r  <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/get'</span><span class="token punctuation">)</span>
传参
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key1'</span><span class="token punctuation">:</span> <span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token string">'key2'</span><span class="token punctuation">:</span> <span class="token string">'value2'</span><span class="token punctuation">,</span> <span class="token string">'key3'</span><span class="token punctuation">:</span> <span class="token boolean">None</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/get'</span><span class="token punctuation">,</span> params<span class="token operator">=</span>payload<span class="token punctuation">)</span>
http<span class="token punctuation">:</span><span class="token operator">//</span>httpbin<span class="token punctuation">.</span>org<span class="token operator">/</span>get?key2<span class="token operator">=</span>value2<span class="token operator">&amp;</span>key1<span class="token operator">=</span>value1

参数也可以传递列表
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key1'</span><span class="token punctuation">:</span> <span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token string">'key2'</span><span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'value2'</span><span class="token punctuation">,</span> <span class="token string">'value3'</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/get'</span><span class="token punctuation">,</span> params<span class="token operator">=</span>payload<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>url<span class="token punctuation">)</span>

http<span class="token punctuation">:</span><span class="token operator">//</span>httpbin<span class="token punctuation">.</span>org<span class="token operator">/</span>get?key1<span class="token operator">=</span>value1<span class="token operator">&amp;</span>key2<span class="token operator">=</span>value2<span class="token operator">&amp;</span>key2<span class="token operator">=</span>value3
r<span class="token punctuation">.</span>text 返回headers中的编码解析的结果，可以通过r<span class="token punctuation">.</span>encoding <span class="token operator">=</span> <span class="token string">'gbk'</span>来变更解码方式
r<span class="token punctuation">.</span>content返回二进制结果
r<span class="token punctuation">.</span>json<span class="token punctuation">(</span><span class="token punctuation">)</span>返回JSON格式，可能抛出异常
r<span class="token punctuation">.</span>status_code
r<span class="token punctuation">.</span>raw返回原始socket respons，需要加参数stream<span class="token operator">=</span><span class="token boolean">True</span>

<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://api.github.com/events'</span><span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>raw
<span class="token operator">&lt;</span>requests<span class="token punctuation">.</span>packages<span class="token punctuation">.</span>urllib3<span class="token punctuation">.</span>response<span class="token punctuation">.</span>HTTPResponse <span class="token builtin">object</span> at <span class="token number">0x101194810</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>raw<span class="token punctuation">.</span>read<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
<span class="token string">'\x1f\x8b\x08\x00\x00\x00\x00\x00\x00\x03'</span>

将结果保存到文件，利用r<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span>filename<span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> fd<span class="token punctuation">:</span>
    <span class="token keyword">for</span> chunk <span class="token keyword">in</span> r<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span>chunk_size<span class="token punctuation">)</span><span class="token punctuation">:</span>
        fd<span class="token punctuation">.</span>write<span class="token punctuation">(</span>chunk<span class="token punctuation">)</span>

传递headers
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> headers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'user-agent'</span><span class="token punctuation">:</span> <span class="token string">'my-app/0.0.1'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> headers<span class="token operator">=</span>headers<span class="token punctuation">)</span>

传递cookies
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">'http://httpbin.org/cookies'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>url<span class="token punctuation">,</span> cookies<span class="token operator">=</span><span class="token builtin">dict</span><span class="token punctuation">(</span>cookies_are<span class="token operator">=</span><span class="token string">'working'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>text
<span class="token string">'{&quot;cookies&quot;: {&quot;cookies_are&quot;: &quot;working&quot;}}'</span>
</code></pre></div><p>2.POST 请求</p> <div class="language-python extra-class"><pre class="language-python"><code>传递表单
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/post'</span><span class="token punctuation">,</span> data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key'</span><span class="token punctuation">:</span><span class="token string">'value'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

发送 HTML 表单形式的数据—非常像一个HTML表单。只需简单地传递一个字典给 data 参数。数据字典 在发出请求时会自动编码为表单形式<span class="token punctuation">:</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'key1'</span><span class="token punctuation">:</span> <span class="token string">'value1'</span><span class="token punctuation">,</span> <span class="token string">'key2'</span><span class="token punctuation">:</span> <span class="token string">'value2'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">&quot;http://httpbin.org/post&quot;</span><span class="token punctuation">,</span> data<span class="token operator">=</span>payload<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token string">&quot;form&quot;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;key2&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value2&quot;</span><span class="token punctuation">,</span>
    <span class="token string">&quot;key1&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;value1&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>

发送的数据并非编码为表单形式的。比如传递一个 string 而不是一个<span class="token builtin">dict</span> ，那么数据会被直接发布出去。
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">'https://api.github.com/some/endpoint'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> payload <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'some'</span><span class="token punctuation">:</span> <span class="token string">'data'</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> data<span class="token operator">=</span>json<span class="token punctuation">.</span>dumps<span class="token punctuation">(</span>payload<span class="token punctuation">)</span><span class="token punctuation">)</span>
或者
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> json<span class="token operator">=</span>payload<span class="token punctuation">)</span>

传递文件
url <span class="token operator">=</span> <span class="token string">'http://httpbin.org/post'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> files <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'report.xls'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> files<span class="token operator">=</span>files<span class="token punctuation">)</span>

配置files，filename<span class="token punctuation">,</span> content_type <span class="token keyword">and</span> headers
files <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'report.xls'</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'report.xls'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'application/vnd.ms-excel'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token string">'Expires'</span><span class="token punctuation">:</span> <span class="token string">'0'</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
files <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'file'</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token string">'report.csv'</span><span class="token punctuation">,</span> <span class="token string">'some,data,to,send\nanother,row,to,send\n'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>

响应
r<span class="token punctuation">.</span>status_code
r<span class="token punctuation">.</span>heards
r<span class="token punctuation">.</span>cookies

跳转
By default Requests will perform location redirection <span class="token keyword">for</span> <span class="token builtin">all</span> verbs <span class="token keyword">except</span> HEAD<span class="token punctuation">.</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies/set?k2=v2&amp;k1=v1'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>url
<span class="token string">'http://httpbin.org/cookies'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>status_code
<span class="token number">200</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>history
<span class="token punctuation">[</span><span class="token operator">&lt;</span>Response <span class="token punctuation">[</span><span class="token number">302</span><span class="token punctuation">]</span><span class="token operator">&gt;</span><span class="token punctuation">]</span>

If you\'re using HEAD<span class="token punctuation">,</span> you can enable redirection <span class="token keyword">as</span> well<span class="token punctuation">:</span>
r<span class="token operator">=</span>requests<span class="token punctuation">.</span>head<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies/set?k2=v2&amp;k1=v1'</span><span class="token punctuation">,</span>allow_redirects<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

You can tell Requests to stop waiting <span class="token keyword">for</span> a response after a given number of seconds <span class="token keyword">with</span> the timeoutparameter<span class="token punctuation">:</span>
requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">0.001</span><span class="token punctuation">)</span>

</code></pre></div><p>3.高级特性：</p> <div class="language-python extra-class"><pre class="language-python"><code>session，自动保存cookies，可以设置请求参数，下次请求自动带上请求参数
s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies/set/sessioncookie/123456789'</span><span class="token punctuation">)</span>
r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies'</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>text<span class="token punctuation">)</span>
<span class="token comment"># '{&quot;cookies&quot;: {&quot;sessioncookie&quot;: &quot;123456789&quot;}}'</span>

session可以用来提供默认数据，函数参数级别的数据会和session级别的数据合并，如果key重复，函数参数级别的数据将覆盖session级别的数据。如果想取消session的某个参数，可以在传递一个相同key，value为<span class="token boolean">None</span>的<span class="token builtin">dict</span>
s <span class="token operator">=</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span>
s<span class="token punctuation">.</span>auth <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'user'</span><span class="token punctuation">,</span> <span class="token string">'pass'</span><span class="token punctuation">)</span> <span class="token comment">#权限认证</span>
s<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>update<span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">'x-test'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment"># both 'x-test' and 'x-test2' are sent</span>
s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/headers'</span><span class="token punctuation">,</span> headers<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'x-test2'</span><span class="token punctuation">:</span> <span class="token string">'true'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

函数参数中的数据只会使用一次，并不会保存到session中如：cookies仅本次有效
r <span class="token operator">=</span> s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies'</span><span class="token punctuation">,</span> cookies<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">'from-my'</span><span class="token punctuation">:</span> <span class="token string">'browser'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>

session也可以自动关闭
<span class="token keyword">with</span> requests<span class="token punctuation">.</span>Session<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> s<span class="token punctuation">:</span>
    s<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/cookies/set/sessioncookie/123456789'</span><span class="token punctuation">)</span>

响应结果不仅包含响应的全部信息，也包含请求信息
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://en.wikipedia.org/wiki/Monty_Python'</span><span class="token punctuation">)</span>
r<span class="token punctuation">.</span>headers
r<span class="token punctuation">.</span>request<span class="token punctuation">.</span>headers
</code></pre></div><p>4.SSL 证书验证</p> <div class="language-shell extra-class"><pre class="language-shell"><code>Requests可以为HTTPS请求验证SSL证书，就像web浏览器一样。要想检查某个主机的SSL证书，你可以使用 verify 参数:
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests.get<span class="token punctuation">(</span><span class="token string">'https://kennethreitz.com'</span>, <span class="token assign-left variable">verify</span><span class="token operator">=</span>True<span class="token punctuation">)</span>
requests.exceptions.SSLError: <span class="token function">hostname</span> <span class="token string">'kennethreitz.com'</span> doesn<span class="token string">'t match either of '</span>*.herokuapp.com<span class="token string">', '</span>herokuapp.com<span class="token string">'

在该域名上我没有设置SSL，所以失败了。但Github设置了SSL:
&gt;&gt;&gt; requests.get('</span>https://github.com<span class="token string">', verify=True)
&lt;Response [200]&gt;

对于私有证书，可以传递一个 CA_BUNDLE 文件的路径给 verify 。也可以设置 REQUEST_CA_BUNDLE 环境变量。
&gt;&gt;&gt; requests.get('</span>https://github.com<span class="token string">', verify='</span>/path/to/certfile<span class="token string">')

如果将 verify 设置为 False，Requests 也能忽略对 SSL 证书的验证。
&gt;&gt;&gt; requests.get('</span>https://kennethreitz.com<span class="token string">', verify=False)
&lt;Response [200]&gt;

默认情况下， verify 是设置为 True 的。选项 verify 仅应用于主机证书。也可以指定一个本地证书用作客户端证书，可以是单个文件（包含密钥和证书）或一个包含两个文件路径的元组:
&gt;&gt;&gt; requests.get('</span>https://kennethreitz.com<span class="token string">', cert=('</span>/path/server.crt<span class="token string">', '</span>/path/key'<span class="token punctuation">))</span>
<span class="token operator">&lt;</span>Response <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>

</code></pre></div><p>5.响应体内容工作流：</p> <div class="language-python extra-class"><pre class="language-python"><code>默认情况下，当进行网络请求后，响应体会立即被下载。可以通过 stream 参数覆盖这个行为，推迟下载响应体直到访问 Response<span class="token punctuation">.</span>content 属性<span class="token punctuation">:</span>
tarball_url <span class="token operator">=</span> <span class="token string">'https://github.com/kennethreitz/requests/tarball/master'</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>tarball_url<span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>

此时仅有响应头被下载下来了，连接保持打开状态，因此允许根据条件获取内容<span class="token punctuation">:</span>
<span class="token keyword">if</span> <span class="token builtin">int</span><span class="token punctuation">(</span>r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'content-length'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> TOO_LONG<span class="token punctuation">:</span>
  content <span class="token operator">=</span> r<span class="token punctuation">.</span>content
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

如果设置 stream 为 <span class="token boolean">True</span>，请求连接不会被关闭，除非读取所有数据或者调用 Response<span class="token punctuation">.</span>close。
可以使用 contextlib<span class="token punctuation">.</span>closing 来自动关闭连接：

<span class="token keyword">import</span> requests
<span class="token keyword">from</span> contextlib
<span class="token keyword">import</span> closing
tarball_url <span class="token operator">=</span> <span class="token string">'https://github.com/kennethreitz/requests/tarball/master'</span>
<span class="token builtin">file</span> <span class="token operator">=</span> <span class="token string">r'D:\Documents\WorkSpace\Python\Test\Python34Test\test.tar.gz'</span>
<span class="token keyword">with</span> closing<span class="token punctuation">(</span>requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span>tarball_url<span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">as</span> r<span class="token punctuation">:</span>
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token builtin">file</span><span class="token punctuation">,</span> <span class="token string">'wb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
<span class="token keyword">for</span> data <span class="token keyword">in</span> r<span class="token punctuation">.</span>iter_content<span class="token punctuation">(</span><span class="token number">1024</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
f<span class="token punctuation">.</span>write<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre></div><p>6.Keep-Alive
来自 <a href="http://docs.python-requests.org/en/master/user/advanced/" target="_blank" rel="noopener noreferrer">http://docs.python-requests.org/en/master/user/advanced/<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>同一会话内发出的任何请求都会自动复用恰当的连接！
注意：只有所有的响应体数据被读取完毕连接才会被释放为连接池；所以确保将 stream 设置为 False 或读取 Response 对象的 content 属性。</p> <p>7.流式上传</p> <div class="language-python extra-class"><pre class="language-python"><code>Requests 支持流式上传，这允许你发送大的数据流或文件而无需先把它们读入内存。要使用流式上传，仅需为你的请求体提供一个类文件对象即可<span class="token punctuation">:</span>
读取文件请使用字节的方式，这样 Requests 会生成正确的 Content<span class="token operator">-</span>Length
<span class="token keyword">with</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'massive-body'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> f<span class="token punctuation">:</span>
    requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://some.url/streamed'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>f<span class="token punctuation">)</span>
</code></pre></div><p>8.分块传输编码</p> <div class="language-python extra-class"><pre class="language-python"><code>对于出去和进来的请求，Requests也支持分块传输编码。要发送一个块编码的请求，仅需为你的请求体提供一个生成器注意生成器输出应该为<span class="token builtin">bytes</span>
<span class="token keyword">def</span> <span class="token function">gen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">yield</span> <span class="token string">b'hi'</span>
    <span class="token keyword">yield</span> <span class="token string">b'there'</span>

requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span><span class="token string">'http://some.url/chunked'</span><span class="token punctuation">,</span> data<span class="token operator">=</span>gen<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

For chunked encoded responses<span class="token punctuation">,</span> it<span class="token string">'s best to iterate over the data using Response.iter_content(). In an ideal situation you'</span>ll have <span class="token builtin">set</span> stream<span class="token operator">=</span><span class="token boolean">True</span> on the request<span class="token punctuation">,</span> <span class="token keyword">in</span> which case you can iterate chunk<span class="token operator">-</span>by<span class="token operator">-</span>chunk by calling iter_content <span class="token keyword">with</span> a chunk size parameter of <span class="token boolean">None</span><span class="token punctuation">.</span> If you want to <span class="token builtin">set</span> a maximum size of the chunk<span class="token punctuation">,</span> you can <span class="token builtin">set</span> a chunk size parameter to <span class="token builtin">any</span> integer<span class="token punctuation">.</span>
POST Multiple Multipart<span class="token operator">-</span>Encoded Files
来自 <span class="token operator">&lt;</span>http<span class="token punctuation">:</span><span class="token operator">//</span>docs<span class="token punctuation">.</span>python<span class="token operator">-</span>requests<span class="token punctuation">.</span>org<span class="token operator">/</span>en<span class="token operator">/</span>master<span class="token operator">/</span>user<span class="token operator">/</span>advanced<span class="token operator">/</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span><span class="token builtin">input</span> <span class="token builtin">type</span><span class="token operator">=</span><span class="token string">&quot;file&quot;</span> name<span class="token operator">=</span><span class="token string">&quot;images&quot;</span> multiple<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> required<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
To do that<span class="token punctuation">,</span> just <span class="token builtin">set</span> files to a <span class="token builtin">list</span> of tuples of <span class="token punctuation">(</span>form_field_name<span class="token punctuation">,</span> file_info<span class="token punctuation">)</span><span class="token punctuation">:</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> url <span class="token operator">=</span> <span class="token string">'http://httpbin.org/post'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> multiple_files <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'foo.png'</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'foo.png'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">(</span><span class="token string">'images'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token string">'bar.png'</span><span class="token punctuation">,</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'bar.png'</span><span class="token punctuation">,</span> <span class="token string">'rb'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'image/png'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r <span class="token operator">=</span> requests<span class="token punctuation">.</span>post<span class="token punctuation">(</span>url<span class="token punctuation">,</span> files<span class="token operator">=</span>multiple_files<span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> r<span class="token punctuation">.</span>text
<span class="token punctuation">{</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
  <span class="token string">'files'</span><span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token string">'images'</span><span class="token punctuation">:</span> <span class="token string">'data:image/png;base64,iVBORw ....'</span><span class="token punctuation">}</span>
  <span class="token string">'Content-Type'</span><span class="token punctuation">:</span> <span class="token string">'multipart/form-data; boundary=3131623adb2043caaeb5538cc7aa0b3a'</span><span class="token punctuation">,</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">}</span>
</code></pre></div><p>9.认证</p> <div class="language-python extra-class"><pre class="language-python"><code>Requests allows you to use specify your own authentication mechanism<span class="token punctuation">.</span>Any <span class="token builtin">callable</span> which <span class="token keyword">is</span> passed <span class="token keyword">as</span> the auth argument to a request method will have the opportunity to modify the request before it <span class="token keyword">is</span> dispatched<span class="token punctuation">.</span>Authentication implementations are subclasses of requests<span class="token punctuation">.</span>auth<span class="token punctuation">.</span>AuthBase<span class="token punctuation">,</span> <span class="token keyword">and</span> are easy to define<span class="token punctuation">.</span> Requests provides two common authentication scheme implementations <span class="token keyword">in</span> requests<span class="token punctuation">.</span>auth<span class="token punctuation">:</span>HTTPBasicAuth <span class="token keyword">and</span> HTTPDigestAuth<span class="token punctuation">.</span>Let's pretend that we have a web service that will only respond <span class="token keyword">if</span> the X<span class="token operator">-</span>Pizza header <span class="token keyword">is</span> <span class="token builtin">set</span> to a password value<span class="token punctuation">.</span> Unlikely<span class="token punctuation">,</span> but just go <span class="token keyword">with</span> it<span class="token punctuation">.</span>
<span class="token keyword">from</span> requests<span class="token punctuation">.</span>auth <span class="token keyword">import</span> AuthBase
<span class="token keyword">class</span> <span class="token class-name">PizzaAuth</span><span class="token punctuation">(</span>AuthBase<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token triple-quoted-string string">&quot;&quot;&quot;Attaches HTTP Pizza Authentication to the given Request object.&quot;&quot;&quot;</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> username<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># setup any auth-related data here</span>
        self<span class="token punctuation">.</span>username <span class="token operator">=</span> username

<span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> r<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># modify and return the request</span>
        r<span class="token punctuation">.</span>headers<span class="token punctuation">[</span><span class="token string">'X-Pizza'</span><span class="token punctuation">]</span> <span class="token operator">=</span> self<span class="token punctuation">.</span>username
        <span class="token keyword">return</span> r

Then<span class="token punctuation">,</span> we can make a request using our Pizza Auth<span class="token punctuation">:</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://pizzabin.org/admin'</span><span class="token punctuation">,</span> auth<span class="token operator">=</span>PizzaAuth<span class="token punctuation">(</span><span class="token string">'kenneth'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token operator">&lt;</span>Response <span class="token punctuation">[</span><span class="token number">200</span><span class="token punctuation">]</span><span class="token operator">&gt;</span>
来自 <span class="token operator">&lt;</span>http<span class="token punctuation">:</span><span class="token operator">//</span>docs<span class="token punctuation">.</span>python<span class="token operator">-</span>requests<span class="token punctuation">.</span>org<span class="token operator">/</span>en<span class="token operator">/</span>master<span class="token operator">/</span>user<span class="token operator">/</span>advanced<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>10.流式请求</p> <div class="language-python extra-class"><pre class="language-python"><code>r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://httpbin.org/stream/20'</span><span class="token punctuation">,</span> stream<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
<span class="token keyword">for</span> line <span class="token keyword">in</span> r<span class="token punctuation">.</span>iter_lines<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
</code></pre></div><p>11.代理</p> <div class="language-python extra-class"><pre class="language-python"><code>If you need to use a proxy<span class="token punctuation">,</span> you can configure individual requests <span class="token keyword">with</span> the proxies argument to <span class="token builtin">any</span> request method<span class="token punctuation">:</span>
<span class="token keyword">import</span> requests
proxies <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token string">'http'</span><span class="token punctuation">:</span> <span class="token string">'http://10.10.1.10:3128'</span><span class="token punctuation">,</span>
  <span class="token string">'https'</span><span class="token punctuation">:</span> <span class="token string">'http://10.10.1.10:1080'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'http://example.org'</span><span class="token punctuation">,</span> proxies<span class="token operator">=</span>proxies<span class="token punctuation">)</span>

To use HTTP Basic Auth <span class="token keyword">with</span> your proxy<span class="token punctuation">,</span> use the http<span class="token punctuation">:</span><span class="token operator">//</span>user<span class="token punctuation">:</span>password@host<span class="token operator">/</span> syntax<span class="token punctuation">:</span>
proxies <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">'http'</span><span class="token punctuation">:</span> <span class="token string">'http://user:pass@10.10.1.10:3128/'</span><span class="token punctuation">}</span>
</code></pre></div><p>12.超时</p> <div class="language-python extra-class"><pre class="language-python"><code>If you specify a single value <span class="token keyword">for</span> the timeout<span class="token punctuation">,</span> like this<span class="token punctuation">:</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token number">5</span><span class="token punctuation">)</span>

The timeout value will be applied to both the connect <span class="token keyword">and</span> the read timeouts<span class="token punctuation">.</span> Specify a <span class="token builtin">tuple</span> <span class="token keyword">if</span> you would like to <span class="token builtin">set</span> the values separately<span class="token punctuation">:</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token punctuation">(</span><span class="token number">3.05</span><span class="token punctuation">,</span> <span class="token number">27</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

If the remote server <span class="token keyword">is</span> very slow<span class="token punctuation">,</span> you can tell Requests to wait forever <span class="token keyword">for</span> a response<span class="token punctuation">,</span> by passing <span class="token boolean">None</span> <span class="token keyword">as</span> a timeout value <span class="token keyword">and</span> then retrieving a cup of coffee<span class="token punctuation">.</span>
r <span class="token operator">=</span> requests<span class="token punctuation">.</span>get<span class="token punctuation">(</span><span class="token string">'https://github.com'</span><span class="token punctuation">,</span> timeout<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
来自 <span class="token operator">&lt;</span>http<span class="token punctuation">:</span><span class="token operator">//</span>docs<span class="token punctuation">.</span>python<span class="token operator">-</span>requests<span class="token punctuation">.</span>org<span class="token operator">/</span>en<span class="token operator">/</span>master<span class="token operator">/</span>user<span class="token operator">/</span>advanced<span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><h3 id="_4-share"><a href="#_4-share" class="header-anchor">#</a> 4.Share:</h3> <p>https://db-engines.com/en/ranking
数据库排名</p> <p>https://www.cnblogs.com/merely/p/10793877.html
linux下NFS远程目录挂载</p> <p>https://blog.csdn.net/weixin_45950544/article/details/103956052
Flask之Blueprint蓝图</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.65b0f24a.js" defer></script><script src="/assets/js/2.d6ca9a42.js" defer></script><script src="/assets/js/74.00cd90be.js" defer></script>
  </body>
</html>
