(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{430:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"arts-2019-左耳听风社群活动-每周完成一个-arts"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#arts-2019-左耳听风社群活动-每周完成一个-arts"}},[t._v("#")]),t._v(" ARTS-2019 左耳听风社群活动--每周完成一个 ARTS")]),t._v(" "),a("p",[t._v("1.Algorithm： 每周至少做一个 leetcode 的算法题\n2.Review: 阅读并点评至少一篇英文技术文章\n3.Tip: 学习至少一个技术技巧\n4.Share: 分享一篇有观点和思考的技术文章")]),t._v(" "),a("h3",{attrs:{id:"_1-algorithm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-algorithm"}},[t._v("#")]),t._v(" 1.Algorithm:")]),t._v(" "),a("p",[t._v("Unique Paths III https://leetcode.com/submissions/detail/344011051/")]),t._v(" "),a("h3",{attrs:{id:"_2-review"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-review"}},[t._v("#")]),t._v(" 2.Review:")]),t._v(" "),a("p",[t._v("https://dev.to/lydiahallie/javascript-visualized-hoisting-478h\nJavaScript️可视化：声明提升")]),t._v(" "),a("h4",{attrs:{id:"点评："}},[a("a",{staticClass:"header-anchor",attrs:{href:"#点评："}},[t._v("#")]),t._v(" 点评：")]),t._v(" "),a("p",[t._v("有时候会碰到 undefined 或者 ReferenceErrors 错误，而声明提升有可能就是罪魁祸首。声明提升常常被解释为：把变量和函数放到文件的顶部，虽然表面上看起来是这样，但事实却不是如此。Lydia Hallie 从编译、执行两个阶段解释了其特性的工作原理。")]),t._v(" "),a("h5",{attrs:{id:"编译阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#编译阶段"}},[t._v("#")]),t._v(" 编译阶段")]),t._v(" "),a("p",[t._v("当 JS 引擎开始解析我们的脚本，第一件事就是为我们代码中的变量 设置内存。这个阶段代码还 没有运行，只是在为后面的代码执行做准备，这个阶段就是 编译阶段。这一阶段的一部分工作就是 找到所有的声明，并用合适的作用域将它们关联起来。而在编译阶段中，函数声明和变量声明存储方式是不同的。")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("函数声明的存储方式\n函数声明的存储，在内存中存储的是整个函数的引用。（注意 函数声明 和 函数表达式 的区别）")])]),t._v(" "),a("li",[a("p",[t._v("let 和 const 声明的变量的存储方式\n变量的存储不太一样。ES6 中引入了两个新的关键字：let 和 const，凡是用这两个关键字定义的变量，存储的值为 uninitialized。")])]),t._v(" "),a("li",[a("p",[t._v("var 声明的变量的存储方式\n用 var 声明的变量，存储的时候默认值为 undefined。")])])]),t._v(" "),a("h5",{attrs:{id:"执行阶段"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行阶段"}},[t._v("#")]),t._v(" 执行阶段")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("提前调用函数\n在编译阶段由于 函数声明 存储的是整个函数的引用，所以即使在函数声明之前也可以调用函数。")])]),t._v(" "),a("li",[a("p",[t._v("提前使用 var 定义的变量\n如果提前使用 var 定义的个变量，就会打印出 var 关键字定义的默认值 undefined。而大多数情况下，这个行为是令人困惑的，因为并不期望它的值是 undefined。")])]),t._v(" "),a("li",[a("p",[t._v("提前使用 const 和 let 定义的变量\n为了解决 var 的问题，所以才会有了 const 和 let，当我们提前访问它们定义的变量的默认值 uninitialized 时，就会抛出 ReferenceError 。这个行为叫：临时死区（Temporal Dead Zone），即不能在这个变量初始化前访问它。")])]),t._v(" "),a("li",[a("p",[t._v("继续执行赋值操作\n当 JS 引擎继续往下解释代码时，解释到某一行有赋值语句时，即会将内存中的值覆盖为代码中定义的值。")])])]),t._v(" "),a("p",[t._v("总结：\n1.函数和变量在 编译阶段 会将声明部分存储在内存中，这就是声明提升。\n2.函数声明存储的是整个函数的引用，var 声明的变量存储的默认值是 undefined，let 和 const 声明的变量的默认值为 uninitialized。")]),t._v(" "),a("h3",{attrs:{id:"_3-tip"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-tip"}},[t._v("#")]),t._v(" 3.Tip:")]),t._v(" "),a("p",[t._v("Flink On Yarn Cluster 部署")]),t._v(" "),a("p",[t._v("1.环境准备")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("软件\njdk： jdk-8u111-linux-x64.tar.gz\nzookeeper: zookeeper-3.4.10.tar.gz\nhadoop: hadoop-2.8.3.tar.gz\nflink:\nflink-10.0-bin-scala_2.11.tar.gz\nflink-shaded-hadoop-2-uber-2.8.3-10.0.jar")])]),t._v(" "),a("li",[a("p",[t._v("主机\n192.168.10.1 master\n192.168.10.2 segment01\n192.168.10.3 segment02")])])]),t._v(" "),a("p",[t._v("2.集群规划")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("主机名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("master")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("segment01")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("segment02")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("用户名")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("用户组")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("flink")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("hdfs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("namenode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("namenode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("zkfc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("zkfc")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("journalnode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("journalnode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("journalnode")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("datanode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("datanode")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("datanode")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("yarn")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("resourcemanager")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("resourcemanager")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("nodemanager")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("nodemanager")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("nodemanager")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("zookeeper")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("quorumpeermain")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("quorumpeermain")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("quorumpeermain")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("-")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("flik")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("masters")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("masters")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("slaves")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("slaves")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("slaves")])])])]),t._v(" "),a("p",[t._v("3.用户和组")]),t._v(" "),a("ol",[a("li",[t._v("用户:flink 组:flink")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# useradd flink")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# passwd flink")]),t._v("\nChanging password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" user flink.\nNew password: \nBAD PASSWORD: it does not contain enough DIFFERENT characters\nBAD PASSWORD: is too simple\nRetype new password: \npasswd: all authentication tokens updated successfully.\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# groupadd flink")]),t._v("\ngroupadd: group "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'flink'")]),t._v(" already exists\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("配置 sudoer 权限")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vim /etc/sudoers")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Allow root ro run any commands anywhere")]),t._v("\nroot "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ALL\nflink "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ALL")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ALL"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" ALL\n")])])]),a("p",[t._v("4.SSH 免密登录")]),t._v(" "),a("ol",[a("li",[t._v("在要配置互信的机器上，切换到互信用户，生成每台主机各自的公钥和私钥")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ ssh-keygen -t rsa -P "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" .ssh\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("将所有的公钥复制汇总到一台主机 (master) 的公钥文件中")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/.ssh/id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment01 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/.ssh/id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" ~/.ssh/id_rsa.pub "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" ~/.ssh/authorized_keys\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("600")]),t._v(" ~/.ssh/authorized_keys\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("将汇总的公钥分发到各个主机")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" ~/.ssh/authorized_keys segment01:~/.ssh/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" ~/.ssh/authorized_keys segment02:~/.ssh/\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("各个主机验证互相")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment01 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("date")]),t._v("\n")])])]),a("p",[t._v("5.集群远程分发,同步脚本")]),t._v(" "),a("p",[t._v("1）在 flink 目录下创建 bin 目录，并在 bin 目录下创建文件 xsync, xcall.sh")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" bin\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" bin/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" xsync \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#1 获取输入参数个数，如果没有参数，直接退出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pcount")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("((")]),t._v("pcount"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("==")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("))")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("then")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" no args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("fi")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#2 获取文件名称")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("p1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("basename")]),t._v(" $p1"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$fname")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#3 获取上级目录到绝对路径")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pdir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" -P "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("$(")]),t._v("dirname $p1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pdir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#4 获取当前用户名称")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("user")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("whoami")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#5  发送到集群其它主机")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" ------------------- master --------------\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -av "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$fname")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v("@master:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" ------------------- segment01 --------------\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -av "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$fname")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v("@segment01:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" ------------------- segment02 --------------\n\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rsync")]),t._v(" -av "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("/"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$fname")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$user")]),t._v("@segment02:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$pdir")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" xcall.sh\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#! /bin/bash")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token for-or-select variable"}},[t._v("i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" master segment01 segment02\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("do")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" --------- "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" ----------\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$*")]),t._v('"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v("\n")])])]),a("p",[t._v("2）修改脚本 xsync ,xcall.sh 具有执行权限")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" xsync\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" xcall.sh \n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("将脚本放到 /usr/local/bin 目录下")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" xcall.sh /usr/local/bin/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" xsync /usr/local/bin/\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("将脚本同步到其它节点")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("su")]),t._v(" root\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master flink"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# cd /usr/local/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master local"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xsync bin/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("fname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("bin\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("pdir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/usr/local\n------------------- master --------------\nsending incremental "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" list\n\nsent "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("73")]),t._v(" bytes  received "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v(" bytes  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.00")]),t._v(" bytes/sec\ntotal size is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("765")]),t._v("  speedup is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.90")]),t._v("\n------------------- segment01 --------------\nsending incremental "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" list\nbin/\nbin/xcall.sh\nbin/xsync\n\nsent "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("927")]),t._v(" bytes  received "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("54")]),t._v(" bytes  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1962.00")]),t._v(" bytes/sec\ntotal size is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("765")]),t._v("  speedup is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.78")]),t._v("\n------------------- segment02 --------------\nsending incremental "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("file")]),t._v(" list\nbin/\nbin/xcall.sh\nbin/xsync\n\nsent "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("927")]),t._v(" bytes  received "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("54")]),t._v(" bytes  "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1962.00")]),t._v(" bytes/sec\ntotal size is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("765")]),t._v("  speedup is "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.78")]),t._v("\n")])])]),a("p",[t._v("6.安装 JDK")]),t._v(" "),a("p",[t._v("1）/opt目录下创建 module 和 software 文件夹，在三台机器上修改 /opt 用户:用户组")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# chown flink:flink /opt/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" module\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" software\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("所需软件导入到 master 的 /opt/software 目录下")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\njdk-8u111-linux-x64.tar.gz\nzookeeper-3.4.10.tar.gz\nhadoop-2.8.3.tar.gz \nflink-10.0-bin-scala_2.11.tar.gz\nflink-shaded-hadoop-2-uber-2.8.3-10.0.jar\n")])])]),a("p",[t._v("3）解压 JDK 到 /opt/module 目录下")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xzvf jdk-8u111-linux-x64.tar.gz -C /opt/module/\n")])])]),a("p",[t._v("4）配置JDK环境变量，在profile文件末尾添加JDK路径，修改后立即生效")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# vi /etc/profile")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#JAVA_HOME")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/jdk1.8.0_111\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${JAVA_HOME}")]),t._v("/bin:"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${"),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")]),t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# source /etc/profile")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("测试JDK是否安装成功")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# java -version")]),t._v("\njava version "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1.8.0_111"')]),t._v("\n")])])]),a("p",[t._v("6）将 master 中的 JDK 和环境变量分发到 segment01、segment02 两台主机")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# xsync /etc/profile")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master opt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xsync module/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment01 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment02 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("xcall.sh 脚本关于 jps 命令，因为 jps 并非是 shell 中的自有命令，分别在三台主机中, 添加软链接")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ln")]),t._v(" -s /opt/module/jdk1.8.0_241/bin/jps /usr/local/bin/jps\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xcall.sh jps\n--------- master ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4062")]),t._v(" Jps\n--------- segment01 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5092")]),t._v(" Jps\n--------- segment02 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4611")]),t._v(" Jps\n")])])]),a("p",[t._v("7.安装zookeeper")]),t._v(" "),a("ol",[a("li",[t._v("解压")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xzvf zookeeper-3.4.10.tar.gz -C /opt/module/\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("三个节点配置环境变量")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#ZOOKEEPER_HOME")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("ZOOKEEPER_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/zookeeper-3.4.10\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("修改zoo.cfg文件")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" zoo_sample.cfg zoo.cfg\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" zoo.cfg \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of milliseconds of each tick")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that the initial ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# synchronization phase can take")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of milliseconds of each tick")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that the initial ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# synchronization phase can take")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that can pass between ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# sending a request and getting an acknowledgement")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the directory where the snapshot is stored.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# do not use /tmp for storage, /tmp here is just ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# example sakes.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/flink/data/zookeeperdata\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the port at which the clients will connect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the maximum number of client connections.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# increase this if you need to handle more clients")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#maxClientCnxns=60")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Be sure to read the maintenance section of the ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# administrator guide before turning on autopurge.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# http://zookeeper.apache.org/doc/current/zookeeperAdmin.html#sc_maintenance")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of snapshots to retain in dataDir")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#autopurge.snapRetainCount=3")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Purge task interval in hours")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# Set to "0" to disable auto purge feature')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#autopurge.purgeInterval=1")]),t._v("\nserver.1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("master:2888:3888\nserver.2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("segment01:2888:3888\nserver.3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("segment02:2888:3888\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("在三个节点上创建 myid 文件 /home/flink/data/zookeeperdata 目录下创建\nmaster    -----1\nsegment01 -----2\nsegment02 -----3")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master zookeeperdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("pwd")]),t._v("\n/home/flink/data/zookeeperdata\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master zookeeperdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" myid\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("同步 zookeeper")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xsync zookeeper-3.4.10/\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("启动")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ zkServer.sh\n")])])]),a("ol",{attrs:{start:"7"}},[a("li",[t._v("验证")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xcall.sh jps\n--------- master ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5221")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6301")]),t._v(" QuorumPeerMain\n--------- segment01 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5092")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6411")]),t._v(" QuorumPeerMain\n--------- segment02 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5611")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6903")]),t._v(" QuorumPeerMain\n")])])]),a("p",[t._v("8.部署 hadoop HA 集群")]),t._v(" "),a("ol",[a("li",[t._v("解压")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xzvf hadoop-2.8.3.tar.gz -C /opt/module/\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("配置环境变量")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("##HADOOP_HOME")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HADOOP_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/hadoop-2.8.3\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("修改配置文件\nhadoop-env.sh\ncore-site.xml\nhdfs-site.xml\nmapred-site.xml\nyarn-site.xml\nslaves")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" hadoop-2.8.3/etc/hadoop/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" hadoop-env.sh \n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("JAVA_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/jdk1.8.0_111\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" core-site.xml \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 hdfs 的 访问入口 namenode访问入口 完全分布式 hdfs://master:9000 \n          高可用中两个namenode 这里配置的是两个namenode nameservice 组名  yantian hdfs://yantian--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("fs.defaultFS"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hdfs://yantian/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 hadoop 数据存储目录 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("hadoop.tmp.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/home/flink/data/hadoopdata/"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 zookeeper 集群访问地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("ha.zookeeper.quorum"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("master:2181,segment01:2181,segment02:218"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" hdfs-site.xml \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定副本数 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.replication"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("--指定 hdfs 的 nameservice 为 yantian，需要和 core-site.xml 中保持一致--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.nameservices"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yantian"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- yantian 下面有两个 NameNode，分别是 nn1，nn2 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.ha.namenodes.yantian"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("nn1,nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- nn1 的 RPC 通信地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.namenode.rpc-address.yantian.nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("master:802"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- nn1 的 http 通信地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.namenode.http-address.yantian.nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("master:5007"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- nn2 的 RPC 通信地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.namenode.rpc-address.yantian.nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("segment01:802"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- nn2 的 http 通信地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.namenode.http-address.yantian.nn"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("segment01:5007"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 NameNode 的 edits 元数据在 JournalNode 上的存放位置 QJM --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.namenode.shared.edits.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("qjournal://master:8485"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("segment01:8485"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("segment02:8485/yantian"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 JournalNode 在本地磁盘存放数据的位置 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.journalnode.edits.dir"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/home/flink/data/hadoopdata/journaldata"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 开启 NameNode 失败自动切换 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.ha.automatic-failover.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 配置失败自动切换实现方式 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 此处配置在安装的时候切记检查不要换行--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.client.failover.proxy.provider.yantian"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.ha.fencing.methods"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n sshfence\n shell"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("/bin/true"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 使用 sshfence 隔离机制时需要 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" 免登陆 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.ha.fencing.ssh.private-key-files"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("/home/flink/.ssh/id_rsa"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 配置 sshfence 隔离机制超时时间 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("dfs.ha.fencing.ssh.connect-timeout"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("mv")]),t._v(" mapred-site.xml.template mapred-site.xml\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" mapred-site.xml \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 mr 框架为 "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yarn")]),t._v(" 方式 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("mapreduce.framework.name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 设置 mapreduce 的历史服务器地址和端口号 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("mapreduce.jobhistory.address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("segment01:1002"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- mapreduce 历史服务器的 web 访问地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("mapreduce.jobhistory.webapp.address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("segment01:1988"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("8")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" yarn-site.xml \n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- Site specific YARN configuration properties --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- Site specific YARN configuration properties --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 开启 RM 高可用 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.ha.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 RM 的 cluster "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("id")]),t._v(" --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.cluster-id"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn_yantian"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 RM 的名字 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.ha.rm-ids"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("rm1,rm"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 分别指定 RM 的地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.hostname.rm"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("master"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.hostname.rm"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("segment0"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("2")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 指定 zk 集群地址 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.zk-address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("master:2181,segment01:2181,segment02:218"),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("1")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 要运行 MapReduce 程序必须配置的附属服务 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.nodemanager.aux-services"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("mapreduce_shuffle"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 开启 YARN 集群的日志聚合功能 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.log-aggregation-enable"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- YARN 集群的聚合日志最长保留时长 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.log-aggregation.retain-seconds"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8640")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("0")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 启用自动恢复 --"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.recovery.enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("true"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.nodemanager.pmem-check-enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("false"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.nodemanager.vmem-check-enabled"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("false"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("-- 制定 resourcemanager 的状态信息存储在 zookeeper 集群上--"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.store.class"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("yarn.resourcemanager.am.max-attempts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/name"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),a("span",{pre:!0,attrs:{class:"token operator"}},[a("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[t._v("4")]),t._v("<")]),t._v("/value"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("The maximum number of application master execution attempts."),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/description"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/property"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("/configuration"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoop"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" slaves \nmaster\nsegment01\nsegment02\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("同步文件")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xsync hadoop-2.8.3/\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hadoop version\nHadoop "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.8")]),t._v(".3\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("初始化步骤按照顺序执行")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(".三台节点启动 zk\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ zkServer.sh start\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment01 module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ zkServer.sh start\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment02 module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ zkServer.sh start\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(".启动 journalnode QJM, "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v("台分别启动\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hadoop-daemon.sh start journalnode\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment01 module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hadoop-daemon.sh start journalnode\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@segment02 module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hadoop-daemon.sh start journalnode\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(".格式化 namenode 选择一个 namenode 节点 "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("master"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 节点\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hadoop namenode -format\n成功: has been successfully formatted.\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),t._v(".将 master 的元数据 远程发送到 segment01 另一个 namenode\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("scp")]),t._v(" -r /home/flink/data/hadoopdata/dfs/ segment01:/home/flink/data/hadoopdata/\n\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v(".格式化 zkfc 和 zookeeper 通信,在 zookeeper 中创建存储 namenode 状态信息的 znode, 在一个namenode上执行即可\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ hdfs zkfc -formatZK\nSuccessfully created /hadoop-ha/yantian "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" ZK\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("启动集群顺序")])]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"center"}},[t._v("主机名")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("master")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("segment01")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("segment02")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("关闭防火墙")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("systemctl stop firewalld.service")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查看防火墙")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("firewall-cmd --state")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("启动 zookeeper")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("zkServer.sh start")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("zkServer.sh start")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("zkServer.sh start")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("启动 hdfs")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("start-dfs.sh 任意节点")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"center"}},[t._v("启动 yarn")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("start-yarn.sh 任意节点")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}}),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})])])]),t._v(" "),a("ol",{attrs:{start:"7"}},[a("li",[t._v("验证")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master hadoopdata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xcall.sh jps\n--------- master ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7840")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7346")]),t._v(" ResourceManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7459")]),t._v(" NodeManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6788")]),t._v(" DataNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6666")]),t._v(" NameNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7018")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7228")]),t._v(" DFSZKFailoverController\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6301")]),t._v(" QuorumPeerMain\n--------- segment01 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6180")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5748")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6411")]),t._v(" QuorumPeerMain\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5638")]),t._v(" DataNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5978")]),t._v(" NodeManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5884")]),t._v(" DFSZKFailoverController\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5550")]),t._v(" NameNode\n--------- segment02 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5760")]),t._v(" NodeManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6903")]),t._v(" QuorumPeerMain\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5844")]),t._v(" ResourceManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5654")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6024")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5544")]),t._v(" DataNode\n")])])]),a("p",[t._v("9.部署 Flink on yarn 集群")]),t._v(" "),a("ol",[a("li",[t._v("解压")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("tar")]),t._v(" -xzvf flink-1.10.0-bin-scala_2.11.tgz -C /opt/module/\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("添加 hadoop 的依赖 jar 包到 lib 目录下")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master software"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" flink-shaded-hadoop-2-uber-2.8.3-10.0.jar /opt/module/flink-1.10.0/lib/\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("配置环境变量")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" /etc/profile\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#FLINK_HOME")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("FLINK_HOME")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/flink-1.10.0\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$FLINK_HOME")]),t._v("/bin\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("HADOOP_CONF_DIR")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/opt/module/hadoop-2.8.3/etc/hadoop\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master lib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("source")]),t._v(" /etc/profile\n")])])]),a("ol",{attrs:{start:"4"}},[a("li",[t._v("配置文件")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" flink-conf.yaml \n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("################################################################################")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  Licensed to the Apache Software Foundation (ASF) under one")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  or more contributor license agreements.  See the NOTICE file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  distributed with this work for additional information")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  regarding copyright ownership.  The ASF licenses this file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  to you under the Apache License, Version 2.0 (the")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  "License"); you may not use this file except in compliance')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  with the License.  You may obtain a copy of the License at")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#      http://www.apache.org/licenses/LICENSE-2.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  Unless required by applicable law or agreed to in writing, software")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#  distributed under the License is distributed on an "AS IS" BASIS,')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  See the License for the specific language governing permissions and")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# limitations under the License.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("################################################################################")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Common")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The external address of the host on which the JobManager runs and can be")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# by specifying the --host <hostname> parameter of the bin/jobmanager.sh executable.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# In high availability mode, if you use the bin/start-cluster.sh script and setup")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the conf/masters file, this will be taken care of automatically. Yarn/Mesos")]),t._v("\n\njobmanager.rpc.address: master\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The RPC port where the JobManager is reachable.")]),t._v("\n\njobmanager.rpc.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6123")]),t._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The heap size for the JobManager JVM")]),t._v("\n\njobmanager.heap.size: 1024m\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The total process memory size for the TaskManager.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n\ntaskmanager.memory.process.size: 1568m\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# It is not recommended to set both 'taskmanager.memory.process.size' and Flink memory.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# taskmanager.memory.flink.size: 1280m")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of task slots that each TaskManager offers. Each slot runs one parallel pipeline.")]),t._v("\n\ntaskmanager.numberOfTaskSlots: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The parallelism used for programs that did not specify and other parallelism.")]),t._v("\n\nparallelism.default: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The default file system scheme and authority.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# By default file paths without scheme are interpreted relative to the local")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# root file system 'file:///'. Use this to override the default and interpret")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# relative paths relative to a different file system,")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for example 'hdfs://mynamenode:12345'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# fs.default-scheme")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# High Availability")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The high-availability mode. Possible options are 'NONE' or 'zookeeper'.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nhigh-availability: zookeeper\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The path where metadata for master recovery is persisted. While ZooKeeper stores")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the small ground truth for checkpoint and leader election, this location stores")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# the larger objects, like persisted dataflow graphs.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Must be a durable file system that is accessible from all nodes")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# (like HDFS, S3, Ceph, nfs, ...) ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nhigh-availability.storageDir: hdfs://yantian/flink/recovery\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The list of ZooKeeper quorum peers that coordinate the high-availability")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# setup. This must be a list of the form:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# "host1:clientPort,host2:clientPort,..." (default clientPort: 2181)')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nhigh-availability.zookeeper.quorum: master:2181,segment01:2181,segment02:2181\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# It can be either "creator" (ZOO_CREATE_ALL_ACL) or "open" (ZOO_OPEN_ACL_UNSAFE)')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# The default value is "open" and it can be changed to "creator" if ZK security is enabled')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# high-availability.zookeeper.client.acl: open")]),t._v("\nhigh-availability.zookeeper.path.root: /flink\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Fault tolerance and checkpointing")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The backend that will be used to store operator state checkpoints if")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# checkpointing is enabled.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# <class-name-of-factory>.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# state.backend: filesystem")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Directory for checkpoints filesystem, when using any of the default bundled")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# state backends.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nstate.checkpoints.dir:  hdfs://yantian/flink/checkpoints\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Default target directory for savepoints, optional.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\nstate.savepoints.dir: hdfs://yantian/flink/savepoints\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Flag to enable/disable incremental checkpoints for backends that")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# support incremental checkpoints (like the RocksDB state backend). ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# state.backend.incremental: false")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The failover strategy, i.e., how the job computation recovers from task failures.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Only restart tasks that may have been affected by the task failure, which typically includes")]),t._v("\n\njobmanager.execution.failover-strategy: region\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Rest & web frontend")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The port to which the REST client connects to. If rest.bind-port has")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# not been specified, then the server will bind to this port as well.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#rest.port: 8081")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The address to which the REST client will connect to")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#rest.address: 0.0.0.0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Port range for the REST and web server to bind to.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#rest.bind-port: 8080-8090")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The address that the REST & web server binds to")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#rest.bind-address: 0.0.0.0")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Flag to specify whether job submission is enabled from the web-based")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# runtime monitor. Uncomment to disable.")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#web.submit.enable: false")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Advanced")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Override the directories for temporary files. If not specified, the")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# system-specific Java temporary directory (java.io.tmpdir property) is taken.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# For framework setups on Yarn or Mesos, Flink will automatically pick up the")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# containers' temp directories without any need for configuration.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Add a delimited list for multiple directories, using the system directory")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# delimiter (colon ':' on unix) or a comma, e.g.:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#     /data1/tmp:/data2/tmp:/data3/tmp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Note: Each directory entry is read from and written to by a different I/O")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# thread. You can include the same directory multiple times in order to create")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# multiple I/O threads against that directory. This is for example relevant for")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# high-throughput RAIDs.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# io.tmp.dirs: /tmp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#需要手动创建,否则启动不了集群")]),t._v("\nio.tmp.dirs: /home/flink/data/flinkdata/tmp\nenv.log.dir: /home/flink/data/flinkdata/logs\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The classloading resolve order. Possible values are 'child-first' (Flink's default)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# and 'parent-first' (Java's default).")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Child first classloading allows users to use different dependency/library")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# versions in their application than those in the classpath. Switching back")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# to 'parent-first' may help with debugging dependency issues.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# classloader.resolve-order: child-first")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The amount of memory going to the network stack. These numbers usually need ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# no tuning. Adjusting them may be necessary in case of an "Insufficient number')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# of network buffers" error. The default min is 64MB, the default max is 1GB.')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# taskmanager.memory.network.fraction: 0.1")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# taskmanager.memory.network.min: 64mb")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# taskmanager.memory.network.max: 1gb")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Flink Cluster Security Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Kerberos authentication for various components - Hadoop, ZooKeeper, and connectors -")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# may be enabled in four steps:")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 1. configure the local krb5.conf file")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 2. provide Kerberos credentials (either a keytab or a ticket cache w/ kinit)")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 3. make the credentials available to various JAAS login contexts")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 4. configure the connector to use JAAS/SASL")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The below configure how Kerberos credentials are provided. A keytab will be used instead of")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# a ticket cache if the keytab path and principal are set.")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# security.kerberos.login.use-ticket-cache: true")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# security.kerberos.login.keytab: /path/to/kerberos/keytab")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# security.kerberos.login.principal: flink-user")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The configuration below defines which JAAS login contexts")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# security.kerberos.login.contexts: Client,KafkaClient")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ZK Security Configuration")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Below configurations are applicable if ZK ensemble is configured for security")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Override below configuration to provide custom ZK service name if configured")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# zookeeper.sasl.service-name: zookeeper")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# The configuration below must match one of the values set in "security.kerberos.login.contexts"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# zookeeper.sasl.login-context-name: Client")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# HistoryServer")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#==============================================================================")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The HistoryServer is started and stopped via bin/historyserver.sh (start|stop)")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Directory to upload completed jobs to. Add this directory to the list of")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# monitored directories of the HistoryServer as well (see below).")]),t._v("\njobmanager.archive.fs.dir: hdfs://yantian/flink/completed_jobs/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The address under which the web-based HistoryServer listens.")]),t._v("\nhistoryserver.web.address: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The port under which the web-based HistoryServer listens.")]),t._v("\nhistoryserver.web.port: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8082")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Comma separated list of directories to monitor for completed jobs.")]),t._v("\nhistoryserver.archive.fs.dir: hdfs://yantian/flink/completed_jobs/\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Interval in milliseconds for refreshing the monitored directories.")]),t._v("\nhistoryserver.archive.fs.refresh-interval: "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" masters \nmaster:8081\nsegment01:8081\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" slaves \nmaster\nsegment01\nsegment02\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" zoo.cfg \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of milliseconds of each tick")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("tickTime")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2000")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that the initial  synchronization phase can take")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("initLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The number of ticks that can pass between  sending a request and getting an acknowledgement")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("syncLimit")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The directory where the snapshot is stored.")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#flinkZK 大写的ZK")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dataDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/flink/data/flinkZK/dataDir\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("dataLogDir")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("/home/flink/data/flinkZK/dataLogDir\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# The port at which the clients will connect")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("clientPort")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2181")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ZooKeeper quorum peers")]),t._v("\nserver.1"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("master:2888:3888\nserver.2"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("segment01:2888:3888\nserver.3"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("segment02:2888:3888\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# server.2=host:peer-port:leader-port")]),t._v("\n")])])]),a("ol",{attrs:{start:"5"}},[a("li",[t._v("启动集群")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ start-cluster.sh\nStarting HA cluster with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(" masters.\nStarting standalonesession daemon on "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" master.\nStarting standalonesession daemon on "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" segment01.\nStarting taskexecutor daemon on "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" master.\nStarting taskexecutor daemon on "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" segment01.\nStarting taskexecutor daemon on "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("host")]),t._v(" segment02.\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ xcall.sh jps\n--------- master ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6301")]),t._v(" QuorumPeerMain\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("116465")]),t._v(" TaskManagerRunner\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("114752")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("115216")]),t._v(" NodeManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("114387")]),t._v(" NameNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10947")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("114516")]),t._v(" DataNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("116116")]),t._v(" StandaloneSessionClusterEntrypoint\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("115098")]),t._v(" ResourceManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("114973")]),t._v(" DFSZKFailoverController\n--------- segment01 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("93155")]),t._v(" TaskManagerRunner\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6411")]),t._v(" QuorumPeerMain\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92804")]),t._v(" StandaloneSessionClusterEntrypoint\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("115892")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91847")]),t._v(" DataNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91963")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("91754")]),t._v(" NameNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92255")]),t._v(" NodeManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("92110")]),t._v(" DFSZKFailoverController\n--------- segment02 ----------\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("82352")]),t._v(" JournalNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("83202")]),t._v(" TaskManagerRunner\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("82772")]),t._v(" ResourceManager\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("82231")]),t._v(" DataNode\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("104822")]),t._v(" Jps\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("6903")]),t._v(" QuorumPeerMain\n"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("82494")]),t._v(" NodeManager\n")])])]),a("ol",{attrs:{start:"6"}},[a("li",[t._v("测试")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master flink-1.10.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ ./bin/flink run -m yarn-cluster ./examples/batch/WordCount.jar\n")])])]),a("p",[t._v("10.集群管理脚本")]),t._v(" "),a("ol",[a("li",[t._v("集群启动脚本")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" flinkStart.sh \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------启动zookeeper----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,starting Zookeeper."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh start\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment01 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh start\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh start\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh status\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment01 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh status\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh status\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,Zookeeper is started."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------启动hdfs----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,starting hdfs."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/start-dfs.sh\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,hdfs started."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------启动yarn----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,starting yarn."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/start-yarn.sh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/yarn-daemon.sh start resourcemanager\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,yarn started."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------启动flink----------------------------"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,starting flink."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$FLINK_HOME")]),t._v("/bin/start-cluster.sh\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,flink started."')]),t._v("\n")])])]),a("ol",{attrs:{start:"2"}},[a("li",[t._v("集群停止脚本")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" flinkStop.sh \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#!/bin/bash")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------停止flink----------------------------"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,shutting flink."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$FLINK_HOME")]),t._v("/bin/stop-cluster.sh\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,flink stopped."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------关闭hdfs----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,shutting hdfs."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/stop-dfs.sh\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,hdfs stopped."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------关闭yarn----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,shutting yarn."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/stop-yarn.sh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$HADOOP_HOME")]),t._v("/sbin/yarn-daemon.sh stop resourcemanager\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,yarn stopped."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-------------------------关闭zookeeper----------------------------"')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,shutting Zookeeper."')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" master "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh stop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment01 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh stop\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ssh")]),t._v(" segment02 "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$ZOOKEEPER_HOME")]),t._v("/bin/zkServer.sh stop\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Now,Zookeeper stopped."')]),t._v("\n")])])]),a("ol",{attrs:{start:"3"}},[a("li",[t._v("脚本授权")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" flinkStart.sh \n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("flink@master bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("chmod")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("777")]),t._v(" flinkStop.sh \n")])])]),a("h3",{attrs:{id:"_4-share"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-share"}},[t._v("#")]),t._v(" 4.Share:")]),t._v(" "),a("p",[t._v("golang 随机 time.sleep 的 Duration 问题\nhttp://xiaorui.cc/archives/3034\ngulp 命令找不到 – 安装 gulp 后出错\nhttps://blog.csdn.net/weixin_33935505/article/details/91666585")])])}),[],!1,null,null,null);s.default=n.exports}}]);