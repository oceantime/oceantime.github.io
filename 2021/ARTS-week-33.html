<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ARTS-week-33 | Oceantime&#39;s blog</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="/logo.jpg">
    <meta name="description" content="Oceantime 个人网站">
    <link rel="preload" href="/assets/css/0.styles.abfd12c2.css" as="style"><link rel="preload" href="/assets/js/app.65b0f24a.js" as="script"><link rel="preload" href="/assets/js/2.d6ca9a42.js" as="script"><link rel="preload" href="/assets/js/8.183e1cde.js" as="script"><link rel="prefetch" href="/assets/js/10.ad6941e4.js"><link rel="prefetch" href="/assets/js/100.8ade9f63.js"><link rel="prefetch" href="/assets/js/101.a15dfa49.js"><link rel="prefetch" href="/assets/js/102.761bd3ff.js"><link rel="prefetch" href="/assets/js/103.4e1cd420.js"><link rel="prefetch" href="/assets/js/104.6cfd7216.js"><link rel="prefetch" href="/assets/js/105.e2d93a01.js"><link rel="prefetch" href="/assets/js/106.6151bc8f.js"><link rel="prefetch" href="/assets/js/107.ad872ea3.js"><link rel="prefetch" href="/assets/js/108.bc756e31.js"><link rel="prefetch" href="/assets/js/109.fe77c5ed.js"><link rel="prefetch" href="/assets/js/11.f05321e1.js"><link rel="prefetch" href="/assets/js/110.39bd8ea8.js"><link rel="prefetch" href="/assets/js/111.bd5d0a8b.js"><link rel="prefetch" href="/assets/js/112.66f93d20.js"><link rel="prefetch" href="/assets/js/113.e3f1b94f.js"><link rel="prefetch" href="/assets/js/114.6ca21a56.js"><link rel="prefetch" href="/assets/js/115.2369b994.js"><link rel="prefetch" href="/assets/js/116.ef676fd0.js"><link rel="prefetch" href="/assets/js/117.7762c22c.js"><link rel="prefetch" href="/assets/js/118.dc732d76.js"><link rel="prefetch" href="/assets/js/119.2b7f1a4d.js"><link rel="prefetch" href="/assets/js/12.b607cc9e.js"><link rel="prefetch" href="/assets/js/120.1b132ede.js"><link rel="prefetch" href="/assets/js/121.ff9a3172.js"><link rel="prefetch" href="/assets/js/122.2f47d49f.js"><link rel="prefetch" href="/assets/js/13.67af4ad6.js"><link rel="prefetch" href="/assets/js/14.c7827c0f.js"><link rel="prefetch" href="/assets/js/15.eedb1566.js"><link rel="prefetch" href="/assets/js/16.fe37cbf7.js"><link rel="prefetch" href="/assets/js/17.a38f0ae2.js"><link rel="prefetch" href="/assets/js/18.4990ee61.js"><link rel="prefetch" href="/assets/js/19.f4dbb6de.js"><link rel="prefetch" href="/assets/js/20.9ffd67c9.js"><link rel="prefetch" href="/assets/js/21.ac6e1d53.js"><link rel="prefetch" href="/assets/js/22.76b0e02e.js"><link rel="prefetch" href="/assets/js/23.ff3410dc.js"><link rel="prefetch" href="/assets/js/24.f76a6fea.js"><link rel="prefetch" href="/assets/js/25.0534f43c.js"><link rel="prefetch" href="/assets/js/26.c3725782.js"><link rel="prefetch" href="/assets/js/27.deb9c9f3.js"><link rel="prefetch" href="/assets/js/28.6f99ddc2.js"><link rel="prefetch" href="/assets/js/29.02cfc711.js"><link rel="prefetch" href="/assets/js/3.9f6270c9.js"><link rel="prefetch" href="/assets/js/30.ccabc2c3.js"><link rel="prefetch" href="/assets/js/31.b08f8990.js"><link rel="prefetch" href="/assets/js/32.ee62ba38.js"><link rel="prefetch" href="/assets/js/33.f7629f38.js"><link rel="prefetch" href="/assets/js/34.2853c933.js"><link rel="prefetch" href="/assets/js/35.97e611fd.js"><link rel="prefetch" href="/assets/js/36.fa3c8ed4.js"><link rel="prefetch" href="/assets/js/37.8ae8d904.js"><link rel="prefetch" href="/assets/js/38.05c35d7b.js"><link rel="prefetch" href="/assets/js/39.e5258c9e.js"><link rel="prefetch" href="/assets/js/4.ecc02e05.js"><link rel="prefetch" href="/assets/js/40.d668fe84.js"><link rel="prefetch" href="/assets/js/41.c09eb1d5.js"><link rel="prefetch" href="/assets/js/42.b940c3f3.js"><link rel="prefetch" href="/assets/js/43.5f4e8385.js"><link rel="prefetch" href="/assets/js/44.7231a1e4.js"><link rel="prefetch" href="/assets/js/45.585825f0.js"><link rel="prefetch" href="/assets/js/46.14ddc0e4.js"><link rel="prefetch" href="/assets/js/47.52d53fb0.js"><link rel="prefetch" href="/assets/js/48.01214996.js"><link rel="prefetch" href="/assets/js/49.a8e7ddc6.js"><link rel="prefetch" href="/assets/js/5.755ee6e4.js"><link rel="prefetch" href="/assets/js/50.8ef31d09.js"><link rel="prefetch" href="/assets/js/51.86c845e5.js"><link rel="prefetch" href="/assets/js/52.0d1a6570.js"><link rel="prefetch" href="/assets/js/53.0b2ca6b6.js"><link rel="prefetch" href="/assets/js/54.daa0b522.js"><link rel="prefetch" href="/assets/js/55.b7e6d8cc.js"><link rel="prefetch" href="/assets/js/56.67e22da8.js"><link rel="prefetch" href="/assets/js/57.1b8d87fd.js"><link rel="prefetch" href="/assets/js/58.4ef89df1.js"><link rel="prefetch" href="/assets/js/59.abdf0f5c.js"><link rel="prefetch" href="/assets/js/6.3df7280b.js"><link rel="prefetch" href="/assets/js/60.35f8805b.js"><link rel="prefetch" href="/assets/js/61.68fa7ebd.js"><link rel="prefetch" href="/assets/js/62.fd6b0085.js"><link rel="prefetch" href="/assets/js/63.af0dbde2.js"><link rel="prefetch" href="/assets/js/64.16a1ffec.js"><link rel="prefetch" href="/assets/js/65.af1a9908.js"><link rel="prefetch" href="/assets/js/66.0ab56108.js"><link rel="prefetch" href="/assets/js/67.7b28f376.js"><link rel="prefetch" href="/assets/js/68.be9ab4b2.js"><link rel="prefetch" href="/assets/js/69.c030abbd.js"><link rel="prefetch" href="/assets/js/7.3549904d.js"><link rel="prefetch" href="/assets/js/70.1469061c.js"><link rel="prefetch" href="/assets/js/71.4802b635.js"><link rel="prefetch" href="/assets/js/72.83cb541b.js"><link rel="prefetch" href="/assets/js/73.3ad064c7.js"><link rel="prefetch" href="/assets/js/74.00cd90be.js"><link rel="prefetch" href="/assets/js/75.cbf47e0f.js"><link rel="prefetch" href="/assets/js/76.44ccee9d.js"><link rel="prefetch" href="/assets/js/77.e9c38d7e.js"><link rel="prefetch" href="/assets/js/78.9122406c.js"><link rel="prefetch" href="/assets/js/79.5478a7f9.js"><link rel="prefetch" href="/assets/js/80.81f8b615.js"><link rel="prefetch" href="/assets/js/81.ceada5ea.js"><link rel="prefetch" href="/assets/js/82.6106ff2d.js"><link rel="prefetch" href="/assets/js/83.59665864.js"><link rel="prefetch" href="/assets/js/84.14e761a8.js"><link rel="prefetch" href="/assets/js/85.dd1f6fdb.js"><link rel="prefetch" href="/assets/js/86.c780faa6.js"><link rel="prefetch" href="/assets/js/87.b6a78c96.js"><link rel="prefetch" href="/assets/js/88.e6f83878.js"><link rel="prefetch" href="/assets/js/89.3b38af38.js"><link rel="prefetch" href="/assets/js/9.d9ab8dd1.js"><link rel="prefetch" href="/assets/js/90.64e54699.js"><link rel="prefetch" href="/assets/js/91.b0c97860.js"><link rel="prefetch" href="/assets/js/92.a49f1aa9.js"><link rel="prefetch" href="/assets/js/93.30383993.js"><link rel="prefetch" href="/assets/js/94.e5ff08c3.js"><link rel="prefetch" href="/assets/js/95.6ee9cb6c.js"><link rel="prefetch" href="/assets/js/96.829351f9.js"><link rel="prefetch" href="/assets/js/97.dcf9c2e9.js"><link rel="prefetch" href="/assets/js/98.58af886e.js"><link rel="prefetch" href="/assets/js/99.d137b7f6.js">
    <link rel="stylesheet" href="/assets/css/0.styles.abfd12c2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Oceantime's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/accumulate/" class="nav-link">
  前端基础
</a></div><div class="nav-item"><a href="/algorithm/" class="nav-link">
  算法题库
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ARTS-week-33</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/2021/ARTS-week-33.html#arts-2019-左耳听风社群活动-每周完成一个-arts" class="sidebar-link">ARTS-2019 左耳听风社群活动--每周完成一个 ARTS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/2021/ARTS-week-33.html#_1-algorithm" class="sidebar-link">1.Algorithm:</a></li><li class="sidebar-sub-header"><a href="/2021/ARTS-week-33.html#_2-review" class="sidebar-link">2.Review:</a></li><li class="sidebar-sub-header"><a href="/2021/ARTS-week-33.html#_3-tip" class="sidebar-link">3.Tip:</a></li><li class="sidebar-sub-header"><a href="/2021/ARTS-week-33.html#_4-share" class="sidebar-link">4.Share:</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="arts-2019-左耳听风社群活动-每周完成一个-arts"><a href="#arts-2019-左耳听风社群活动-每周完成一个-arts" class="header-anchor">#</a> ARTS-2019 左耳听风社群活动--每周完成一个 ARTS</h2> <p>1.Algorithm： 每周至少做一个 leetcode 的算法题
2.Review: 阅读并点评至少一篇英文技术文章
3.Tip: 学习至少一个技术技巧
4.Share: 分享一篇有观点和思考的技术文章</p> <h3 id="_1-algorithm"><a href="#_1-algorithm" class="header-anchor">#</a> 1.Algorithm:</h3> <ol start="671"><li><p>二叉树中第二小的节点：https://leetcode-cn.com/submissions/detail/207060207/</p></li> <li><p>用最少数量的箭引爆气球：https://leetcode-cn.com/submissions/detail/207058744/</p></li> <li><p>递增子序列：https://leetcode-cn.com/submissions/detail/207033672/</p></li></ol> <h3 id="_2-review"><a href="#_2-review" class="header-anchor">#</a> 2.Review:</h3> <p>https://www.mihaileric.com/posts/machine-learning-project-error-analysis-model-v2/
从零开始的完整机器学习项目：错误分析和模型 V2</p> <h4 id="点评："><a href="#点评：" class="header-anchor">#</a> 点评：</h4> <p>在这篇文章中，将继续最后一个帖子离开的地方，并解决整个机器学习产品生命周期的下一阶段：获取初始数据集并执行探索性数据分析。作为快速复习者，请记住，目标是将数据驱动的解决方案应用于从初始设置到部署的问题。将进行的阶段包括：</p> <ul><li><p>这些将涵盖以下所有内容：</p> <ul><li>构想、组织代码库和设置模组</li> <li>数据集采集和探索性数据分析</li> <li>使用 v1 模型构建和测试管道</li> <li>执行错误分析并向 v2 模型重复（此帖子）</li> <li>部署模型并连接连续集成解决方案</li></ul></li> <li><p>快速回顾：
回想一下，在上一篇文章中，构建了一个基于特征的随机森林分类器作为第一个模型。目标是启动并运行一些模型，这些模型可以通过可配置的管道进行训练，并为用户提供直接价值。提醒一下，能够建立一个模型，大致实现 74%7 4 % 用于识别标题是假的还是真实的保留测试集的准确性。但这究竟意味着什么？这个性能够好吗？在典型的研究环境中，如果表现是最先进的，工作可能会就此停止。会写一篇论文，在午夜会议截止日期前一小时提交，然后就完成了。在提供真实世界ML 价值的世界中，工作才刚刚开始。在这一点上，最好将模型部署给用户，让人们与之交互，并使用这些结果来改进模型。这反映了 ML 产品开发基于持续反馈循环的性质<img src="data:image/png;base64,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" alt="An image"></p> <p>虽然不会立即走这条完整的路线，但会做一些同样重要的事情，即对模型执行手动错误和特征分析。这是开展任何机器学习项目的关键一步，因为它帮助了解模型从数据中学到了什么，没有提供足够的信号来解决问题，以及需要做些什么。</p></li> <li><p>了解特征重要性</p> <ul><li>让从了解 v1 模型中最重要的特性开始。可以从计算树中特征的基尼重要性开始。这计算了在随机森林中训练树期间特征带来的基尼杂质的总减少。Scikit-learn对这些特征重要性的支持是开箱即用的。可以按如下方式计算它们：</li></ul></li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">compute_impurity_feature_importance</span><span class="token punctuation">(</span>model<span class="token punctuation">,</span> feature_names<span class="token punctuation">:</span> List<span class="token punctuation">[</span><span class="token builtin">str</span><span class="token punctuation">]</span><span class="token punctuation">,</span> num_features<span class="token punctuation">:</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">35</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    importances <span class="token operator">=</span> model<span class="token punctuation">.</span>model<span class="token punctuation">.</span>feature_importances_
    sorted_idx <span class="token operator">=</span> importances<span class="token punctuation">.</span>argsort<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">for</span> idx <span class="token keyword">in</span> sorted_idx<span class="token punctuation">[</span><span class="token punctuation">:</span>num_features<span class="token punctuation">]</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;</span><span class="token interpolation"><span class="token punctuation">{</span>feature_names<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string"> --- </span><span class="token interpolation"><span class="token punctuation">{</span>importances<span class="token punctuation">[</span>idx<span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
</code></pre></div><ul><li>以下是它产生的主要功能：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token assign-left variable">false_count</span><span class="token operator">=</span><span class="token number">0</span> --- <span class="token number">0.01788103750021081</span>
<span class="token assign-left variable">barely_true_count</span><span class="token operator">=</span><span class="token number">1</span> --- <span class="token number">0.013547527016297977</span>
<span class="token assign-left variable">mostly_true_count</span><span class="token operator">=</span><span class="token number">0</span> --- <span class="token number">0.012814332174567926</span>
<span class="token assign-left variable">false_count</span><span class="token operator">=</span><span class="token number">1</span> --- <span class="token number">0.012356274396352049</span>
<span class="token assign-left variable">barely_true_count</span><span class="token operator">=</span><span class="token number">0</span> --- <span class="token number">0.011642340204808786</span>
<span class="token assign-left variable">half_true_count</span><span class="token operator">=</span><span class="token number">0</span> --- <span class="token number">0.011123275790760898</span>
<span class="token assign-left variable">pants_fire_count</span><span class="token operator">=</span><span class="token number">0</span> --- <span class="token number">0.010704431737810377</span>
the --- <span class="token number">0.009264955075530558</span>
<span class="token assign-left variable">mostly_true_count</span><span class="token operator">=</span><span class="token number">1</span> --- <span class="token number">0.009118849790203196</span>
<span class="token assign-left variable">half_true_count</span><span class="token operator">=</span><span class="token number">1</span> --- <span class="token number">0.00812081824119793</span>
<span class="token keyword">in</span> --- <span class="token number">0.00806058304960812</span>
of --- <span class="token number">0.007734625265523087</span>
to --- <span class="token number">0.007070031612018406</span>
<span class="token assign-left variable">pants_fire_count</span><span class="token operator">=</span><span class="token number">1</span> --- <span class="token number">0.0068806431741690426</span>
says --- <span class="token number">0.006082293331787273</span>
on --- <span class="token number">0.005531578965784581</span>
and --- <span class="token number">0.005017675857693454</span>
</code></pre></div><ul><li><p>正如所看到的，许多顶级特征是为“信用历史”计数创建的垃圾箱。这是一个有趣的观察，因为它表明了解说话者过去的诚实记录将决定他们未来的行为。</p></li> <li><p>当应用这个框架来分析模型在验证集上的输出时，得到了这个图：<img src="/assets/img/ARTS-week-33-1.5837df35.png" alt="An image"></p></li> <li><p>理解上面的情节非常棘手，所以让举个例子。考虑列出的第一个特征：pants_fire_count=0。回想一下，这意味着发言者的pants_fire信用记录计数（表明公然撒谎）在 10 个垃圾箱中的第一个。这意味着他们过去没有很多公然撒谎的例子。现在，如果该特征具有很高的值（因为这些是二元特征，这意味着它是 1 并且说话者没有很多公然撒谎的实例），那么这将倾向于推高FALSE概率的值要更小。或者换句话说，这将使数据点更有可能被标记为TRUE。有道理！</p></li> <li><p>误差分析</p> <ul><li>现在了解了特征重要性，让花一些时间分析模型会犯什么样的错误。为此，将在验证集上运行模型，并找到它最不可信和最不正确的数据点，即TRUE和FALSE概率之间的绝对差异最小的地方。</li> <li>还可以对模型最有信心的不正确示例进行分析，但现在将看看最棘手的示例。</li></ul></li> <li><p>数据告诉什么？前面的分析引入了一个关于数据道德和模型问责制的有趣问题。初始模型使用诸如“信用历史”和演讲者党派等特征在给定的数据上表现得相当好。虽然这确实帮助在这个数据集上做得很好，但那些真的是认为对假新闻检测问题最有意义的特征吗？你可以看到这很容易陷入让特征编码数据偏差的兔子洞中。在这方面必须非常小心，以确保清楚模型已经完成了什么：它在这个特定的假新闻数据集上表现良好，但离解决更普遍的问题还很远。数据集很小（大约 1 万个数据点），自己还没有对它是否准确捕获需要能够在假新闻检测系统中建模的所有现象进行任何质量控制。这是目前拥有的最好的，所以会继续使用它，但应该承认特征可能对这个特定的数据集有多么偏颇。为了解决这个问题，需要采取一些措施，比如增加数据集覆盖率，这样就无法通过党派等潜在的虚假特征在离线评估中做得很好。</p></li> <li><p>型号 V2 现在将致力于在数据集上构建另一个模型。这样做时，可以利用从特征和错误分析中获得的新特征洞察来迭代随机森林模型。相反，将使用一些在自然语言处理中变得司空见惯的新的基于 Transformer 的模型，看看可以通过原始词汇和语言特征来学习什么。在这里，将结合使用HuggingFace Transformers 库和Pytorch-lightning来利用Roberta 模型来完成这项任务。Roberta 模型将仅对每个数据点中的说话者语句进行编码，而不会对数据中的其他字段进行编码。</p> <ul><li>该RobertaModel会是这个样子：</li></ul> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">RobertaModel</span><span class="token punctuation">(</span>Model<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">:</span> Dict<span class="token punctuation">,</span> load_from_ckpt<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      self<span class="token punctuation">.</span>config <span class="token operator">=</span> config
      <span class="token keyword">if</span> load_from_ckpt<span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>model <span class="token operator">=</span> RobertaModule<span class="token punctuation">.</span>load_from_checkpoint<span class="token punctuation">(</span>
              os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">&quot;model_output_path&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span> config<span class="token punctuation">[</span><span class="token string">&quot;checkpoint_name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
              config<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">)</span>
      <span class="token keyword">else</span><span class="token punctuation">:</span>
          self<span class="token punctuation">.</span>model <span class="token operator">=</span> RobertaModule<span class="token punctuation">(</span>config<span class="token punctuation">)</span>
          checkpoint_callback <span class="token operator">=</span> ModelCheckpoint<span class="token punctuation">(</span>monitor<span class="token operator">=</span><span class="token string">&quot;val_loss&quot;</span><span class="token punctuation">,</span>
                                                mode<span class="token operator">=</span><span class="token string">&quot;min&quot;</span><span class="token punctuation">,</span>
                                                dirpath<span class="token operator">=</span>config<span class="token punctuation">[</span><span class="token string">&quot;model_output_path&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                filename<span class="token operator">=</span><span class="token string">&quot;roberta-model-epoch={epoch}-val_loss={val_loss:.4f}&quot;</span><span class="token punctuation">,</span>
                                                save_weights_only<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
          
          self<span class="token punctuation">.</span>trainer <span class="token operator">=</span> Trainer<span class="token punctuation">(</span>max_epochs<span class="token operator">=</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&quot;num_epochs&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                 gpus<span class="token operator">=</span><span class="token number">1</span> <span class="token keyword">if</span> torch<span class="token punctuation">.</span>cuda<span class="token punctuation">.</span>is_available<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">else</span> <span class="token boolean">None</span><span class="token punctuation">,</span>
                                 callbacks<span class="token operator">=</span><span class="token punctuation">[</span>checkpoint_callback<span class="token punctuation">]</span><span class="token punctuation">,</span>
                                 logger<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">)</span>
  
  <span class="token keyword">def</span> <span class="token function">train</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>
            train_datapoints<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Datapoint<span class="token punctuation">]</span><span class="token punctuation">,</span>
            val_datapoints<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Datapoint<span class="token punctuation">]</span><span class="token punctuation">,</span>
            cache_featurizer<span class="token punctuation">:</span> <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">False</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
      train_data <span class="token operator">=</span> FakeNewsTorchDataset<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">,</span> train_datapoints<span class="token punctuation">)</span>
      val_data <span class="token operator">=</span> FakeNewsTorchDataset<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">,</span> val_datapoints<span class="token punctuation">)</span>
      train_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>train_data<span class="token punctuation">,</span>
                                    shuffle<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">,</span>
                                    batch_size<span class="token operator">=</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&quot;batch_size&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                    pin_memory<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
      val_dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>val_data<span class="token punctuation">,</span>
                                  shuffle<span class="token operator">=</span><span class="token boolean">False</span><span class="token punctuation">,</span>
                                  batch_size<span class="token operator">=</span><span class="token number">16</span><span class="token punctuation">,</span>
                                  pin_memory<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
      
      self<span class="token punctuation">.</span>trainer<span class="token punctuation">.</span>fit<span class="token punctuation">(</span>self<span class="token punctuation">.</span>model<span class="token punctuation">,</span>
                       train_dataloader<span class="token operator">=</span>train_dataloader<span class="token punctuation">,</span>
                       val_dataloaders<span class="token operator">=</span>val_dataloader<span class="token punctuation">)</span>
  
  <span class="token keyword">def</span> <span class="token function">predict</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> datapoints<span class="token punctuation">:</span> List<span class="token punctuation">[</span>Datapoint<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> np<span class="token punctuation">.</span>array<span class="token punctuation">:</span>
      data <span class="token operator">=</span> FakeNewsTorchDataset<span class="token punctuation">(</span>self<span class="token punctuation">.</span>config<span class="token punctuation">,</span> datapoints<span class="token punctuation">)</span>
      dataloader <span class="token operator">=</span> DataLoader<span class="token punctuation">(</span>data<span class="token punctuation">,</span>
                              batch_size<span class="token operator">=</span>self<span class="token punctuation">.</span>config<span class="token punctuation">[</span><span class="token string">&quot;batch_size&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                              pin_memory<span class="token operator">=</span><span class="token boolean">True</span><span class="token punctuation">)</span>
      self<span class="token punctuation">.</span>model<span class="token punctuation">.</span><span class="token builtin">eval</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      predicted <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      self<span class="token punctuation">.</span>model<span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token keyword">with</span> torch<span class="token punctuation">.</span>no_grad<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
          <span class="token keyword">for</span> idx<span class="token punctuation">,</span> batch <span class="token keyword">in</span> <span class="token builtin">enumerate</span><span class="token punctuation">(</span>dataloader<span class="token punctuation">)</span><span class="token punctuation">:</span>
              output <span class="token operator">=</span> self<span class="token punctuation">.</span>model<span class="token punctuation">(</span>input_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                  attention_mask<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;attention_mask&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                  token_type_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;type_ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                                  labels<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">]</span><span class="token punctuation">.</span>cuda<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
              predicted<span class="token punctuation">.</span>append<span class="token punctuation">(</span>output<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> torch<span class="token punctuation">.</span>cat<span class="token punctuation">(</span>predicted<span class="token punctuation">,</span> axis<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>cpu<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>detach<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>numpy<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>在这里，利用了定义的RobertaModule：</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">RobertaModule</span><span class="token punctuation">(</span>pl<span class="token punctuation">.</span>LightningModule<span class="token punctuation">)</span><span class="token punctuation">:</span>
  <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> config<span class="token punctuation">:</span> Dict<span class="token punctuation">)</span><span class="token punctuation">:</span>
      <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
      base_dir <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      full_model_output_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>base_dir<span class="token punctuation">,</span> config<span class="token punctuation">[</span><span class="token string">&quot;model_output_path&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      self<span class="token punctuation">.</span>config <span class="token operator">=</span> config
      self<span class="token punctuation">.</span>classifier <span class="token operator">=</span> RobertaForSequenceClassification<span class="token punctuation">.</span>from_pretrained<span class="token punctuation">(</span>config<span class="token punctuation">[</span><span class="token string">&quot;type&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                                                                         cache_dir<span class="token operator">=</span>full_model_output_path<span class="token punctuation">)</span>
  
  <span class="token keyword">def</span> <span class="token function">forward</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span>
              input_ids<span class="token punctuation">:</span> np<span class="token punctuation">.</span>array<span class="token punctuation">,</span>
              attention_mask<span class="token punctuation">:</span> np<span class="token punctuation">.</span>array<span class="token punctuation">,</span>
              token_type_ids<span class="token punctuation">:</span> np<span class="token punctuation">.</span>array<span class="token punctuation">,</span>
              labels<span class="token punctuation">:</span> np<span class="token punctuation">.</span>array<span class="token punctuation">)</span><span class="token punctuation">:</span>
      output <span class="token operator">=</span> self<span class="token punctuation">.</span>classifier<span class="token punctuation">(</span>input_ids<span class="token operator">=</span>input_ids<span class="token punctuation">,</span>
                               attention_mask<span class="token operator">=</span>attention_mask<span class="token punctuation">,</span>
                               token_type_ids<span class="token operator">=</span>token_type_ids<span class="token punctuation">,</span>
                               labels<span class="token operator">=</span>labels
                               <span class="token punctuation">)</span>
      <span class="token keyword">return</span> output
  
  <span class="token keyword">def</span> <span class="token function">training_step</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> batch<span class="token punctuation">,</span> batch_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>
      output <span class="token operator">=</span> self<span class="token punctuation">(</span>input_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    attention_mask<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;attention_mask&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    token_type_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;type_ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    labels<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;train_loss&quot;</span><span class="token punctuation">,</span> output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f&quot;Train Loss: </span><span class="token interpolation"><span class="token punctuation">{</span>output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span><span class="token string">&quot;</span></span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  
  <span class="token keyword">def</span> <span class="token function">validation_step</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> batch<span class="token punctuation">,</span> batch_idx<span class="token punctuation">)</span><span class="token punctuation">:</span>
      output <span class="token operator">=</span> self<span class="token punctuation">(</span>input_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    attention_mask<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;attention_mask&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    token_type_ids<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;type_ids&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                    labels<span class="token operator">=</span>batch<span class="token punctuation">[</span><span class="token string">&quot;label&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      self<span class="token punctuation">.</span>log<span class="token punctuation">(</span><span class="token string">&quot;val_loss&quot;</span><span class="token punctuation">,</span> output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> output<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>
  <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div><ul><li>由于模型接口和通用训练循环，可以运行它以获得以下测试集性能：</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>INFO - <span class="token number">2021</span>-01-16 <span class="token number">20</span>:37:05,693 - train_transformer.py - Test metrics: <span class="token punctuation">{</span><span class="token string">'test f1'</span><span class="token builtin class-name">:</span> <span class="token number">0.7358813462635483</span>, <span class="token string">'test accuracy'</span><span class="token builtin class-name">:</span> <span class="token number">0.6391270459859704</span>, <span class="token string">'test auc'</span><span class="token builtin class-name">:</span> <span class="token number">0.6917187020672321</span>, <span class="token string">'test true negative'</span><span class="token builtin class-name">:</span> <span class="token number">175</span>, <span class="token string">'test false negative'</span><span class="token builtin class-name">:</span> <span class="token number">82</span>, <span class="token string">'test false positive'</span><span class="token builtin class-name">:</span> <span class="token number">381</span>, <span class="token string">'test true positive'</span><span class="token builtin class-name">:</span> <span class="token number">645</span><span class="token punctuation">}</span>
</code></pre></div><ul><li>因此，声明中的纯文本特征不会单独削减它。进一步的工作（留给读者作为练习）可以探索从数据中编码一些其他字段（信用记录等）作为 Roberta 的输入。</li></ul></li></ul> <h3 id="_3-tip"><a href="#_3-tip" class="header-anchor">#</a> 3.Tip:</h3> <h4 id="registry-私有镜像库创建"><a href="#registry-私有镜像库创建" class="header-anchor">#</a> registry 私有镜像库创建</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>$/usr/local/docker<span class="token comment"># mkdir registry</span>
$/usr/local/docker<span class="token comment"># cd registry/</span>
$/usr/local/docker/registry<span class="token comment"># vim docker-compose.yml</span>
version: <span class="token string">'3.1'</span>
services:
  registry:
    image: registry
    restart: always
    container_name: registry
    ports:
      - <span class="token number">5000</span>:5000
    volumes:
      - /usr/local/docker/registry/data:/var/lib/registry
</code></pre></div><h4 id="rancher-镜像推送镜像库并通过镜像库方式启动"><a href="#rancher-镜像推送镜像库并通过镜像库方式启动" class="header-anchor">#</a> Rancher 镜像推送镜像库并通过镜像库方式启动</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>./rancher-load-images.sh --image-list ./rancher-images.txt --windows-image-list ./rancher-windows-images.txt --registry

docker login <span class="token number">127.0</span>.0.1:5000
root/123456

<span class="token function">chmod</span> +x rancher-load-images.sh

./rancher-load-images.sh --image-list ./rancher-images.txt --registry <span class="token number">127.0</span>.0.1:5000

docker run -d --privileged --restart<span class="token operator">=</span>unless-stopped -p <span class="token number">8080</span>:80 -p <span class="token number">8443</span>:443 -e <span class="token assign-left variable">CATTLE_SYSTEM_DEFAULT_REGISTRY</span><span class="token operator">=</span><span class="token number">127.0</span>.0.1:5000 -e <span class="token assign-left variable">CATTLE_SYSTEM_CATALOG</span><span class="token operator">=</span>bundled  <span class="token number">127.0</span>.0.1:5000/rancher/rancher:v2.5.9
</code></pre></div><h4 id="docker-镜像推送到私有镜像库"><a href="#docker-镜像推送到私有镜像库" class="header-anchor">#</a> docker 镜像推送到私有镜像库</h4> <div class="language-shell extra-class"><pre class="language-shell"><code>docker pull rancher/hyperkube:v1.20.9-rancher1
docker tag rancher/hyperkube:v1.20.9-rancher1 <span class="token number">127.0</span>.0.1:5000/rancher/hyperkube:v1.20.9-rancher1
docker push <span class="token number">127.0</span>.0.1:5000/rancher/hyperkube:v1.20.9-rancher1
</code></pre></div><h3 id="_4-share"><a href="#_4-share" class="header-anchor">#</a> 4.Share:</h3> <p>https://blog.csdn.net/qq_32828933/article/details/104220570
CentOS 8 安装 docker/docker-compose</p> <p>https://www.jianshu.com/p/40f4fbe1ec22
Docker决战到底(三) Rancher2.x的安装与使用</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.65b0f24a.js" defer></script><script src="/assets/js/2.d6ca9a42.js" defer></script><script src="/assets/js/8.183e1cde.js" defer></script>
  </body>
</html>
